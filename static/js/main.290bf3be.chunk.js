(this.webpackJsonpbuddies_fe=this.webpackJsonpbuddies_fe||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),i=n(8),u=n.n(i),s=n(2),o=n(14),d=n(6),l=n(15),b=n(16),j=n.n(b),p=n(18),f=n(5),g=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,c=arguments.length>1?arguments[1]:void 0;return c.type in t?t[c.type](n,c):n}},h=function(e){return{jwt:e.user.authentication.jwt,user_id:e.user.authentication.id}},O=function(e){return e.pending=!0,e},v=function(e){return e.pending=!1,e},m=function(e){return e.pending=!1,e},y=function(e,t){var n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=c.success_logic,a=c.request_logic,i=c.failure_logic;return n={},Object(f.a)(n,e+"/request",(function(e,n){return e[t]=O(e[t]),a?a(e,n):e})),Object(f.a)(n,e+"/success",(function(e,n){return e[t]=v(e[t]),r?r(e,n):e})),Object(f.a)(n,e+"/failure",(function(e,n){return e[t]=m(e[t]),i?i(e,n):e})),n},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.success_logic,r=n.failure_logic;return Object(f.a)({},e,(function(n){return function(a,i){a({type:e+"/request"}),t(n,a,i).then((function(t){if(a({type:e+"/success",payload:t}),c)return c(t,{args:n,dispatch:a,getState:i})})).catch((function(t){if(a({type:e+"/failure",payload:t}),r)return r(t,{args:n,dispatch:a,getState:i})}))}}))},_=n(3),S=n(7),w=n.n(S),N=n(9),I="https://buddies-backend.herokuapp.com/",C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.Authorization="Bearer "+e,t},k=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var n=Object(N.a)(w.a.mark((function n(c){var r;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=I+e,t["Content-Type"]="application/json",n.abrupt("return",fetch(r,{method:"POST",headers:t,body:JSON.stringify(c)}).then((function(e){return e.json()})));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},T=function(e){return function(t){return function(e){return function(t){return function(){var n=Object(N.a)(w.a.mark((function n(c){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",k(e)(C(t))(c));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}(e)(t)}},B={archiveBuddy:T("buddy/archive"),archiveInteraction:T("interaction/archive"),createBuddy:T("buddy/create"),createInteraction:T("interaction/create"),updateBuddy:T("buddy/update"),updateInteraction:T("interaction/update"),getUserData:function(e){return function(){var t=Object(N.a)(w.a.mark((function t(n){var c,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.userId,r=C(e),t.abrupt("return",fetch(I+"user/"+c,{headers:r,method:"GET"}).then((function(e){return e.json().then((function(e){for(var t=new Map,n=0,c=Object.values(e.interactions);n<c.length;n++)for(var r=c[n],a=0,i=Object.values(r.participants);a<i.length;a++){var u=i[a];t.has(u)||t.set(u,[]),t.get(u).push(r)}return{buddies:e.buddies,interactions:e.interactions,buddyToInteractionMap:t}}))})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:k("login")(),signup:k("sign_up")()},D="user/login",F="user/sign_up",q={login:{pending:!1},signup:{pending:!1},authentication:{is_authenticated:!1,jwt:"",id:""},user_info:{email:""}},M=x(D,(function(e,t,n){return B.login(e)}),{success_logic:function(e,t){t.args,t.dispatch,t.getState},failure_logic:function(e,t){t.args,t.dispatch,t.getState}}),P=x(F,(function(e,t,n){return B.signup(e)}),{success_logic:function(e,t){var n=t.args,c=t.dispatch;t.getState;c(E[D]({email:n.email,password:n.password}))},failure_logic:function(e,t){t.args,t.dispatch,t.getState}}),L=y(F,"signup"),U=y(D,"login",{success_logic:function(e,t){return e.authentication.is_authenticated=!0,e.authentication.jwt=t.payload.jwt,e.authentication.id=t.payload.user.id,e.user_info.email=t.payload.user.email,e},request_logic:function(e,t){return e},failure_logic:function(e,t){return e.authentication.is_authenticated=!1,e}}),E=Object(_.a)(Object(_.a)({},M),P),J=g(q,Object(_.a)(Object(_.a)({},U),L)),R="buddies/get",z="buddies/create",A="buddies/create_interaction",G="buddies/start_create",W="buddies/start_create_interaction",H="buddies/complete_create_interaction",K={getUserData:{pending:!1},buddies:{},interactions:{},buddyToInteractionMap:{},buddyPending:!1,createBuddy:{pending:!1},pendingInteractions:{}},Q=x(R,(function(e,t,n){var c=h(n()),r=c.jwt,a=c.user_id;return B.getUserData(r)({userId:a})}),{success_logic:function(e,t,n){},failure_logic:function(e,t,n){}}),V=x(z,(function(e,t,n){var c=h(n()),r=c.jwt,a=c.user_id;return B.createBuddy(r)(Object(_.a)({user_id:a},e))}),{success_logic:function(e,t){t.args;var n=t.dispatch;t.getState;n(ee[R]())},failure_logic:function(e,t){t.args,t.dispatch,t.getState}}),X=y(z,"createBuddy",{success_logic:function(e,t){return e.buddyPending=!1,e},request_logic:function(e,t){return e},failure_logic:function(e,t){return e}}),Y=x(A,(function(e,t,n){var c=h(n()),r=c.jwt,a=c.user_id;return B.createInteraction(r)(Object(_.a)({user_id:a},e))}),{success_logic:function(e,t){var n=t.args,c=t.dispatch;t.getState;c(ee[R]()),c({type:H,payload:{buddyId:n.participants[0]}})},failure_logic:function(e,t){t.args,t.dispatch,t.getState}}),Z=(y(A,"createInteraction",{success_logic:function(e,t){return e},request_logic:function(e,t){return e},failure_logic:function(e,t){return e}}),y(R,"getUserData",{success_logic:function(e,t){return e.buddies=t.payload.buddies,e.interactions=t.payload.interactions,e.buddyToInteractionMap=t.payload.buddyToInteractionMap,e},request_logic:function(e,t){return e},failure_logic:function(e,t){return e}})),$=Object(_.a)(Object(_.a)(Object(_.a)({},Z),X),{},(c={},Object(f.a)(c,G,(function(e){return e.buddyPending=!0,e})),Object(f.a)(c,W,(function(e,t){var n=t.payload.buddyId;return e.pendingInteractions[n]=!0,e})),Object(f.a)(c,H,(function(e,t){console.log(t);var n=t.payload.buddyId;return e.pendingInteractions[n]=!1,e})),c)),ee=Object(_.a)(Object(_.a)(Object(_.a)({},Q),V),Y),te=g(K,$),ne=Object(d.combineReducers)({buddies:te,user:J}),ce=n(12),re=n(17),ae={key:"primary",storage:n.n(re).a,stateReconciler:j.a},ie=Object(ce.a)(ae,ne),ue=Object(l.composeWithDevTools)(Object(d.applyMiddleware)(p.a)),se=function(){var e=Object(d.createStore)(ie,ue);return{store:e,persistor:Object(ce.b)(e)}},oe=n(0),de=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){var t=ee[R]();e(t)}),[e]),Object(oe.jsxs)(r.Fragment,{children:[Object(oe.jsx)(he,{}),Object(oe.jsx)(ge,{})]})},le=n(4),be=function(e){var t="login",n="signup",c=Object(r.useState)(""),a=Object(le.a)(c,2),i=a[0],u=a[1],s=Object(r.useState)(""),o=Object(le.a)(s,2),d=o[0],l=o[1],b=Object(r.useState)(""),j=Object(le.a)(b,2),p=j[0],f=j[1],g=Object(r.useState)(t),h=Object(le.a)(g,2),O=h[0],v=h[1],m=function(e){var t=["title"];return e===O&&t.push("active"),Object(oe.jsx)("h3",{className:t.join(" "),onClick:function(){return v(e)},children:e})};return Object(oe.jsxs)("form",{onSubmit:O===t?e.handleLogin:e.handleSignup,children:[Object(oe.jsxs)("div",{children:[m(t),m(n)]}),Object(oe.jsx)("input",{className:"field",type:"email",value:i,placeholder:"email",onChange:function(e){return u(e.target.value)}}),Object(oe.jsx)("input",{className:"field",type:"password",value:d,placeholder:"password",onChange:function(e){return l(e.target.value)}}),O===n&&Object(oe.jsx)("input",{className:"field",type:"password",value:p,placeholder:"confirm password",onChange:function(e){return f(e.target.value)}}),Object(oe.jsx)("input",{className:"button",type:"submit",value:"submit"})]})},je=function(){var e=Object(s.b)(),t=function(e,t,n){return e.includes("@")&&t===n};return Object(oe.jsx)("div",{id:"landing",children:Object(oe.jsx)(be,{handleLogin:function(t){t.preventDefault();var n=t.target.elements[0].value,c=t.target.elements[1].value,r=E[D]({email:n,password:c});e(r)},handleSignup:function(n){n.preventDefault();var c=n.target.elements[0].value,r=n.target.elements[1].value,a=n.target.elements[2].value;if(t(c,r,a)){var i=E[F]({email:c,password:r});e(i)}else console.log("wrong")}})})},pe=function(){var e=Object(s.c)((function(e){return e.user.authentication.is_authenticated}));return Object(oe.jsxs)(r.Fragment,{children:[Object(oe.jsx)(me,{}),e?Object(oe.jsx)(de,{}):Object(oe.jsx)(je,{}),Object(oe.jsx)(ye,{})]})},fe=function(e){var t=e.name,n=(e.birthday,e.cadence,e.notes),c=(e.last_contacted,e.id);return Object(oe.jsxs)("div",{className:"panel buddy",children:[Object(oe.jsx)("h1",{children:t}),Object(oe.jsx)("p",{children:n}),Object(oe.jsx)(ve,{buddy_id:c})]})},ge=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.buddies.buddies})),n=Object(s.c)((function(e){return e.buddies.buddyPending}));return Object(oe.jsxs)("div",{className:"container buddy-list",children:[!n&&Object(oe.jsx)("button",{className:"button",onClick:function(){e({type:G})},children:"Create Buddy"}),n&&Object(oe.jsx)(xe,{handleSubmit:function(t){t.preventDefault();var n=t.target.elements[0].value,c=t.target.elements[1].value,r=t.target.elements[2].value,a=ee[z]({name:n,notes:c,birthday:r});e(a)}}),Object.values(t).map((function(e){return Object(oe.jsx)(fe,Object(_.a)({},e),e.id)}))]})},he=function(){var e=Object(s.c)((function(e){return e.user.user_info})),t=Object(s.c)((function(e){return e.buddies.buddies})),n=Object(s.c)((function(e){return e.buddies.interactions}));return Object(oe.jsxs)("div",{className:"container dashboard",children:[Object(oe.jsxs)("div",{className:"panel half",children:[Object(oe.jsx)("p",{children:"profile"}),Object(oe.jsx)("h1",{children:e.email})]}),Object(oe.jsxs)("div",{className:"panel quarter",children:[Object(oe.jsx)("p",{children:"buddies"}),Object(oe.jsx)("h1",{children:Object.keys(t).length})]}),Object(oe.jsxs)("div",{className:"panel quarter",children:[Object(oe.jsx)("p",{children:"interactions"}),Object(oe.jsx)("h1",{children:Object.keys(n).length})]})]})},Oe=function(e){var t=e.notes,n=e.date;e.particpants;return Object(oe.jsxs)(r.Fragment,{children:[Object(oe.jsx)("h4",{children:n}),Object(oe.jsx)("p",{children:t})]})},ve=function(e){var t,n=Object(s.b)(),c=e.buddy_id,a=Object(s.c)((function(e){return c in e.buddies.pendingInteractions&&e.buddies.pendingInteractions[c]})),i=Object(s.c)((function(e){return e.buddies.buddyToInteractionMap.get(c)}));return Object(oe.jsxs)(r.Fragment,{children:[!a&&Object(oe.jsx)("button",{className:"button",onClick:function(){n({type:W,payload:{buddyId:c}})},children:"Create Interaction"}),a&&Object(oe.jsx)(_e,{handleSubmit:(t=c,function(e){e.preventDefault();var c=e.target.elements[0].value,r=(e.target.elements[1].value,[t]),a=e.target.elements[2].value,i=ee[A]({notes:c,participants:r,date:a});n(i)})}),i&&i.map((function(e){return Object(oe.jsx)(Oe,Object(_.a)({},e),e.id)}))]})},me=function(){var e=Object(s.c)((function(e){return e.user})),t=e.user_info,n=e.authentication;return Object(oe.jsx)(r.Fragment,{children:Object(oe.jsx)("div",{id:"header",children:Object(oe.jsxs)("div",{className:"container header centered",children:[Object(oe.jsx)("h2",{children:"buddies."}),!!n.is_authenticated&&Object(oe.jsxs)("p",{children:["hi, ",t.email,"!"]})]})})})},ye=function(){return Object(oe.jsx)(r.Fragment,{})},xe=function(e){var t=Object(r.useState)(""),n=Object(le.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(""),u=Object(le.a)(i,2),s=u[0],o=u[1],d=Object(r.useState)(""),l=Object(le.a)(d,2),b=l[0],j=l[1];return Object(oe.jsx)("div",{className:"panel buddy",children:Object(oe.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(oe.jsx)("input",{className:"field",type:"text",value:c,placeholder:"name",onChange:function(e){return a(e.target.value)}}),Object(oe.jsx)("input",{className:"field",type:"text",value:s,placeholder:"notes",onChange:function(e){return o(e.target.value)}}),Object(oe.jsx)("input",{className:"field",type:"text",value:b,placeholder:"10-02-1997",onChange:function(e){return j(e.target.value)}}),Object(oe.jsx)("input",{className:"button",type:"submit",value:"submit"})]})})},_e=function(e){var t=Object(r.useState)(""),n=Object(le.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(""),u=Object(le.a)(i,2),s=u[0],o=u[1],d=Object(r.useState)(""),l=Object(le.a)(d,2),b=l[0],j=l[1];return Object(oe.jsx)("div",{classNames:"panel buddy",children:Object(oe.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(oe.jsx)("input",{className:"field",type:"text",value:c,placeholder:"notes",onChange:function(e){return a(e.target.value)}}),Object(oe.jsx)("input",{className:"field",type:"text",value:s,placeholder:"participants",onChange:function(e){return o(e.target.value)}}),Object(oe.jsx)("input",{className:"field",type:"text",value:b,placeholder:"08-24-2021",onChange:function(e){return j(e.target.value)}}),Object(oe.jsx)("input",{className:"button",type:"submit",value:"submit"})]})})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},we=(n(33),se()),Ne=we.store,Ie=we.persistor;console.log(Ie),u.a.render(Object(oe.jsx)(a.a.StrictMode,{children:Object(oe.jsx)(s.a,{store:Ne,children:Object(oe.jsx)(o.a,{loading:null,persistor:Ie,children:Object(oe.jsx)(pe,{})})})}),document.getElementById("root")),Se()}},[[34,1,2]]]);
//# sourceMappingURL=main.290bf3be.chunk.js.map